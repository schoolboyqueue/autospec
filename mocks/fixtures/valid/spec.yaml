feature:
  branch: "test-feature"
  created: "2025-01-01"
  status: "Draft"
  input: "Test feature for validation and mock testing"

user_stories:
  - id: "US-001"
    title: "Basic functionality test"
    priority: "P1"
    as_a: "developer"
    i_want: "to test the mock infrastructure"
    so_that: "I can write reliable tests"
    why_this_priority: "Testing is foundational"
    independent_test: "Run unit tests with mocks"
    acceptance_scenarios:
      - given: "a mock executor"
        when: "tests are executed"
        then: "no real Claude calls are made"
      - given: "an isolated git repo"
        when: "tests modify git state"
        then: "original repo is unchanged"

requirements:
  functional:
    - id: "FR-001"
      description: "Mock must simulate Claude CLI behavior"
      testable: true
      acceptance_criteria: "Mock returns configured responses"
    - id: "FR-002"
      description: "Git isolation must prevent branch pollution"
      testable: true
      acceptance_criteria: "Original branch unchanged after test"
  non_functional:
    - id: "NFR-001"
      category: "code_quality"
      description: "Tests must be deterministic"
      measurable_target: "100% consistent results across runs"
    - id: "NFR-002"
      category: "performance"
      description: "Mock tests should be fast"
      measurable_target: "Complete in under 1 second"

success_criteria:
  measurable_outcomes:
    - id: "SC-001"
      description: "All mock tests pass"
      metric: "Pass rate"
      target: "100%"
    - id: "SC-002"
      description: "No real API calls made"
      metric: "Claude API calls during tests"
      target: "0"

key_entities:
  - name: "MockExecutor"
    description: "Simulates Claude CLI execution"
    attributes:
      - "Response queue"
      - "Call recording"
      - "Error simulation"

edge_cases:
  - scenario: "Network failure simulation"
    expected_behavior: "Mock returns configured error without network call"
  - scenario: "Timeout simulation"
    expected_behavior: "Mock delays response by configured duration"

assumptions:
  - "Tests run in isolated environment"
  - "Mock infrastructure is properly initialized"

constraints:
  - "Must not make real API calls"
  - "Must not modify production git state"

out_of_scope:
  - "Real Claude CLI integration tests"
  - "Production deployment testing"

_meta:
  version: "1.0.0"
  generator: "autospec"
  generator_version: "mock-fixture"
  created: "2025-01-01T00:00:00Z"
  artifact_type: "spec"
