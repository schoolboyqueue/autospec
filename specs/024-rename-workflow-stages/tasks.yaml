tasks:
    branch: "024-rename-workflow-stages"
    created: "2025-12-16"
    spec_path: "specs/024-rename-workflow-stages/spec.yaml"
    plan_path: "specs/024-rename-workflow-stages/plan.yaml"
summary:
    total_tasks: 24
    total_phases: 8
    parallel_opportunities: 8
    estimated_complexity: "medium"
phases:
    - number: 1
      title: "Core Type Renaming"
      purpose: "Rename the fundamental Stage type and constants in executor.go"
      tasks:
        - id: "T001"
          title: "Rename Phase type to Stage in internal/workflow/executor.go"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/executor.go"
          dependencies: []
          acceptance_criteria:
            - "type Phase renamed to type Stage"
            - "PhaseSpecify, PhasePlan, PhaseTasks, PhaseImplement constants renamed to StageSpecify, StagePlan, StageTasks, StageImplement"
            - "PhaseConstitution, PhaseClarify, PhaseChecklist, PhaseAnalyze constants renamed to Stage equivalents"
            - "PhaseResult struct renamed to StageResult"
            - "All internal references updated"
        - id: "T002"
          title: "Update executor.go method signatures using Phase to Stage"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/executor.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "ExecutePhase renamed to ExecuteStage"
            - "All method parameters using Phase type use Stage"
            - "All return types using Phase type use Stage"
            - "Variable names updated (phase to stage where appropriate)"
    - number: 2
      title: "Configuration Renaming"
      purpose: "Rename phase_config.go to stage_config.go and update all structs"
      tasks:
        - id: "T003"
          title: "Rename phase_config.go to stage_config.go"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/stage_config.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "File renamed from phase_config.go to stage_config.go"
            - "Git history preserved via git mv"
        - id: "T004"
          title: "Rename PhaseConfig to StageConfig in stage_config.go"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/stage_config.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "PhaseConfig struct renamed to StageConfig"
            - "NewPhaseConfig renamed to NewStageConfig"
            - "GetCanonicalOrder updated to return Stage types"
            - "ArtifactDependency updated to use Stage type"
        - id: "T005"
          title: "Update all imports of phase_config.go across codebase"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/"
          dependencies: ["T004"]
          acceptance_criteria:
            - "All CLI files using PhaseConfig updated to StageConfig"
            - "All workflow files updated with new type names"
            - "No compile errors from import changes"
    - number: 3
      title: "Workflow Orchestrator Updates"
      purpose: "Update workflow.go to use Stage terminology consistently"
      tasks:
        - id: "T006"
          title: "Update method signatures in workflow.go from Phase to Stage"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/workflow.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "All method signatures using Phase parameter use Stage"
            - "executePhase method renamed to executeStage"
            - "Variable names updated (phaseCount to stageCount, currentPhase to currentStage, etc.)"
        - id: "T007"
          title: "Update output messages from 'Phase X/Y' to 'Stage X/Y'"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-001"
          file_path: "internal/workflow/workflow.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "User-facing messages use 'Stage' for workflow-level output"
            - "Task phase messages remain unchanged ('Phase 1', 'Phase 2' for task groups)"
            - "Progress display shows stage terminology for workflow"
    - number: 4
      title: "Preflight and Retry Updates"
      purpose: "Update preflight.go and retry.go with Stage terminology"
      tasks:
        - id: "T008"
          title: "Update preflight.go artifact dependency messages"
          status: "Completed"
          type: "refactor"
          parallel: true
          story_id: "US-001"
          file_path: "internal/workflow/preflight.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "Messages refer to 'stage' for workflow-level dependencies"
            - "CheckArtifactDependencies uses Stage type"
            - "GeneratePrerequisiteWarning uses stage terminology"
        - id: "T009"
          title: "Rename PhaseExecutionState to StageExecutionState in retry.go"
          status: "Completed"
          type: "refactor"
          parallel: true
          story_id: "US-003"
          file_path: "internal/retry/retry.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "PhaseExecutionState renamed to StageExecutionState"
            - "MarkPhaseComplete renamed to MarkStageComplete"
            - "All related method and field names updated"
        - id: "T010"
          title: "Add backward-compatible parsing for old retry state format"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/retry/retry.go"
          dependencies: ["T009"]
          acceptance_criteria:
            - "Old retry state files with 'phase' keys still load correctly"
            - "New retry state files use 'stage' keys"
            - "Migration happens transparently on next save"
    - number: 5
      title: "Progress Display Updates"
      purpose: "Update progress display types for Stage terminology"
      tasks:
        - id: "T011"
          title: "Rename PhaseStatus to StageStatus in progress/types.go"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/progress/types.go"
          dependencies: ["T010"]
          acceptance_criteria:
            - "PhaseStatus enum renamed to StageStatus"
            - "PhaseInfo renamed to StageInfo for workflow display"
            - "All constants updated (PhaseRunning to StageRunning, etc.)"
        - id: "T012"
          title: "Update progress display callers to use StageStatus"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/"
          dependencies: ["T011"]
          acceptance_criteria:
            - "All workflow files using PhaseStatus use StageStatus"
            - "Task phase display types remain unchanged"
            - "No compile errors from type changes"
    - number: 6
      title: "CLI Help Text Updates"
      purpose: "Update all CLI command help text with stage/phase distinction"
      tasks:
        - id: "T013"
          title: "Update run.go help text to use 'stage' for workflow steps"
          status: "Completed"
          type: "documentation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Help text refers to workflow steps as 'stages'"
            - "Core stages description uses 'stage' terminology"
            - "Optional stages description uses 'stage' terminology"
        - id: "T014"
          title: "Update all.go and prep.go help text"
          status: "Completed"
          type: "documentation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/"
          dependencies: ["T012"]
          acceptance_criteria:
            - "all.go help text uses 'stages' for workflow"
            - "prep.go help text uses 'stages' for workflow"
            - "Consistent terminology across both commands"
        - id: "T015"
          title: "Preserve 'phase' terminology in implement.go for task phases"
          status: "Completed"
          type: "documentation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/implement.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "--phases, --phase, --from-phase flags unchanged"
            - "Help text correctly uses 'phase' for task groupings"
            - "Clear distinction in help between workflow stage and task phases"
        - id: "T016"
          title: "Update status.go output for workflow stage terminology"
          status: "Completed"
          type: "documentation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/status.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Status output refers to workflow steps as 'stages'"
            - "Task phase status remains as 'phase'"
    - number: 7
      title: "Documentation Updates"
      purpose: "Update all documentation with consistent terminology"
      tasks:
        - id: "T017"
          title: "Update CLAUDE.md with stage/phase distinction"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: "US-002"
          file_path: "CLAUDE.md"
          dependencies: ["T016"]
          acceptance_criteria:
            - "All workflow-level 'phase' references changed to 'stage'"
            - "'Phase' reserved for task groupings within implementation"
            - "Clear explanation of stage vs phase hierarchy"
        - id: "T018"
          title: "Add hierarchy diagram to CLAUDE.md"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: "US-002"
          file_path: "CLAUDE.md"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Diagram shows stages contain phases"
            - "Diagram clearly illustrates: Workflow Stages -> Implementation Phases -> Tasks"
            - "Diagram uses ASCII art or markdown formatting"
        - id: "T019"
          title: "Update README.md terminology"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: "US-002"
          file_path: "README.md"
          dependencies: ["T018"]
          acceptance_criteria:
            - "All workflow-level references use 'stage'"
            - "Consistent terminology throughout README"
            - "Quick start and examples use correct terminology"
        - id: "T020"
          title: "Update .claude/commands/*.md files"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: "US-002"
          file_path: ".claude/commands/"
          dependencies: ["T019"]
          acceptance_criteria:
            - "All slash command documentation uses stage/phase correctly"
            - "autospec.implement.md uses 'phase' for task groupings"
            - "Other command docs use 'stage' for workflow steps"
    - number: 8
      title: "Testing and Validation"
      purpose: "Ensure all tests pass and validate terminology consistency"
      tasks:
        - id: "T021"
          title: "Run make test and fix any test failures"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "internal/"
          dependencies: ["T020"]
          acceptance_criteria:
            - "All unit tests pass"
            - "All integration tests pass"
            - "Test assertions updated with new type names"
        - id: "T022"
          title: "Run make lint and fix formatting"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: null
          file_path: "."
          dependencies: ["T021"]
          acceptance_criteria:
            - "go fmt passes with no changes needed"
            - "go vet passes with no warnings"
            - "All linting checks pass"
        - id: "T023"
          title: "Verify CLI commands work identically"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "."
          dependencies: ["T022"]
          acceptance_criteria:
            - "autospec run -a works as before"
            - "autospec implement --phases works as before"
            - "autospec status shows correct information"
            - "All existing command invocations produce same behavior"
        - id: "T024"
          title: "Audit terminology for any missed instances"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "."
          dependencies: ["T023"]
          acceptance_criteria:
            - "grep for 'phase' in workflow context finds no instances"
            - "grep for 'Phase' type in executor.go finds no instances"
            - "grep confirms 'Stage' used for workflow terminology"
            - "grep confirms 'phase' only used for task groupings"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: ["US-003"]
          blocks: ["US-002"]
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-003"
          depends_on: []
          blocks: ["US-001"]
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3]
        - phase: 3
          blocks: [4]
        - phase: 4
          blocks: [5]
        - phase: 5
          blocks: [6]
        - phase: 6
          blocks: [7]
        - phase: 7
          blocks: [8]
        - phase: 8
          blocks: []
parallel_execution:
    - phase: 4
      parallel_groups:
        - tasks: ["T008", "T009"]
          rationale: "Different files with no shared dependencies"
    - phase: 6
      parallel_groups:
        - tasks: ["T013", "T014", "T015", "T016"]
          rationale: "Different CLI files, independent help text updates"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3]
        description: "Core type renaming + configuration + workflow orchestrator updates"
        validation: "Code compiles with Stage terminology; basic tests pass"
    incremental_delivery:
        - milestone: "Core Types Ready"
          phases: [1, 2]
          deliverable: "Stage type exists and is usable; PhaseConfig renamed to StageConfig"
        - milestone: "Workflow Updated"
          phases: [1, 2, 3, 4, 5]
          deliverable: "All internal code uses Stage terminology consistently"
        - milestone: "User-Facing Complete"
          phases: [1, 2, 3, 4, 5, 6, 7]
          deliverable: "CLI help and all documentation updated with stage/phase distinction"
        - milestone: "Fully Validated"
          phases: [1, 2, 3, 4, 5, 6, 7, 8]
          deliverable: "All tests pass; terminology audit complete; ready for PR"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "autospec dev"
    created: "2025-12-16T09:00:43Z"
    artifact_type: "tasks"
