plan:
  branch: "018-command-aliases"
  created: "2025-12-16"
  spec_path: "specs/018-command-aliases/spec.yaml"

summary: |
  This implementation adds short command aliases to all major autospec commands using
  Cobra's built-in Aliases field. The approach is minimal and straightforward: each
  command file receives an Aliases field with the specified short forms, and Cobra
  automatically handles alias resolution and help text display.

  The implementation requires only adding one line (the Aliases field) to each of 11
  command definitions. Cobra's built-in help system will automatically display
  "Aliases: alias1, alias2" below the Usage line when aliases are present. This is
  already working for the status command which has Aliases: []string{"st"}.

technical_context:
  language: "Go"
  framework: "Cobra CLI"
  primary_dependencies:
    - name: "github.com/spf13/cobra"
      version: "v1.10.1"
      purpose: "CLI framework with built-in alias support"
  storage: "None"
  testing:
    framework: "go test"
    approach: "Table-driven tests verifying alias resolution and help text display"
  target_platform: "linux/darwin/windows (amd64/arm64)"
  project_type: "cli"
  performance_goals: "CLI startup <50ms, no performance impact from aliases"
  constraints:
    - "Must use Cobra's built-in Aliases mechanism"
    - "Must not break existing command functionality"
    - "Must not conflict with existing aliases or subcommands"
  scale_scope: "Single binary, 11 commands receiving aliases"

constitution_check:
  constitution_path: ".autospec/memory/constitution.yaml"
  gates:
    - name: "Test-First Development"
      status: "PASS"
      notes: "Tests will verify alias resolution for all commands before implementation"
    - name: "Validation-First Workflow"
      status: "N/A"
      notes: "No workflow phase changes - purely CLI command configuration"
    - name: "Performance Standards"
      status: "PASS"
      notes: "Cobra aliases add zero runtime overhead - resolved at command registration"
    - name: "Idempotency and Retry Logic"
      status: "N/A"
      notes: "No state changes - purely command configuration"
    - name: "Standardized Exit Codes"
      status: "PASS"
      notes: "Aliases execute the same underlying command - exit codes unchanged"
    - name: "YAML-First Artifacts"
      status: "N/A"
      notes: "No artifact changes"
    - name: "Code Formatting"
      status: "PASS"
      notes: "Will run go fmt after changes"
    - name: "Cross-Platform Compatibility"
      status: "PASS"
      notes: "Cobra aliases work identically across all platforms"
    - name: "Explicit Dependencies"
      status: "PASS"
      notes: "Using existing Cobra dependency - no new dependencies"
    - name: "Documentation Standards"
      status: "PASS"
      notes: "CLAUDE.md already documents aliases; Cobra auto-displays in help"

research_findings:
  decisions:
    - topic: "Alias implementation mechanism"
      decision: "Use Cobra's Aliases field on cobra.Command"
      rationale: |
        Cobra has native support for command aliases via the Aliases []string field.
        This is already used for the status command (Aliases: []string{"st"}).
        Aliases are automatically displayed in help output and resolved at runtime.
      alternatives_considered:
        - "Custom command wrapper - rejected as overengineered"
        - "Symlinks or shell aliases - rejected as external to application"
    - topic: "Help text display"
      decision: "Rely on Cobra's automatic alias display"
      rationale: |
        Cobra automatically displays "Aliases: x, y" in command help when aliases exist.
        This is already visible in 'autospec status --help' showing "Aliases: st".
        No custom help template modification needed.
      alternatives_considered:
        - "Custom help template - rejected as unnecessary"
        - "Manual alias documentation - rejected as redundant"
    - topic: "Single-letter alias conflicts"
      decision: "Allow single-letter aliases as they don't conflict with flags"
      rationale: |
        Cobra distinguishes between subcommands (positional) and flags (prefixed with -).
        'autospec s' is unambiguously the specify command, not a flag.
        This matches the assumption in the spec.
      alternatives_considered:
        - "Two-letter minimum - rejected as less convenient"

data_model:
  entities: []

api_contracts:
  endpoints: []

project_structure:
  documentation:
    - path: "CLAUDE.md"
      description: "Already documents aliases in command reference section"
  source_code:
    - path: "internal/cli/specify.go"
      description: "Add Aliases: []string{\"spec\", \"s\"}"
    - path: "internal/cli/plan.go"
      description: "Add Aliases: []string{\"p\"}"
    - path: "internal/cli/tasks.go"
      description: "Add Aliases: []string{\"t\"}"
    - path: "internal/cli/implement.go"
      description: "Add Aliases: []string{\"impl\", \"i\"}"
    - path: "internal/cli/status.go"
      description: "Already has Aliases: []string{\"st\"}"
    - path: "internal/cli/doctor.go"
      description: "Add Aliases: []string{\"doc\"}"
    - path: "internal/cli/constitution.go"
      description: "Add Aliases: []string{\"const\"}"
    - path: "internal/cli/clarify.go"
      description: "Add Aliases: []string{\"cl\"}"
    - path: "internal/cli/checklist.go"
      description: "Add Aliases: []string{\"chk\"}"
    - path: "internal/cli/analyze.go"
      description: "Add Aliases: []string{\"az\"}"
    - path: "internal/cli/version.go"
      description: "Add Aliases: []string{\"v\"}"
  tests:
    - path: "internal/cli/alias_test.go"
      description: "New test file for alias resolution verification"

implementation_phases:
  - phase: 1
    name: "Add tests for alias resolution"
    goal: "Create table-driven tests verifying all aliases resolve correctly"
    deliverables:
      - "internal/cli/alias_test.go with test cases for all 11 commands"
      - "Tests verify command lookup by alias returns correct command"
  - phase: 2
    name: "Add aliases to command definitions"
    goal: "Add Aliases field to all 10 commands that don't yet have aliases"
    dependencies:
      - "Phase 1"
    deliverables:
      - "specify.go: Aliases: []string{\"spec\", \"s\"}"
      - "plan.go: Aliases: []string{\"p\"}"
      - "tasks.go: Aliases: []string{\"t\"}"
      - "implement.go: Aliases: []string{\"impl\", \"i\"}"
      - "doctor.go: Aliases: []string{\"doc\"}"
      - "constitution.go: Aliases: []string{\"const\"}"
      - "clarify.go: Aliases: []string{\"cl\"}"
      - "checklist.go: Aliases: []string{\"chk\"}"
      - "analyze.go: Aliases: []string{\"az\"}"
      - "version.go: Aliases: []string{\"v\"}"
  - phase: 3
    name: "Verify and format"
    goal: "Run tests, verify help output, and format code"
    dependencies:
      - "Phase 2"
    deliverables:
      - "All tests passing"
      - "go fmt applied"
      - "Manual verification of help text"

risks:
  - risk: "Alias conflicts with future subcommands"
    likelihood: "low"
    impact: "low"
    mitigation: "Document reserved aliases; short forms like 's', 'p', 't' are unlikely subcommand names"
  - risk: "User muscle memory disruption"
    likelihood: "low"
    impact: "low"
    mitigation: "Aliases are additive - full command names still work"

open_questions: []

_meta:
  version: "1.0.0"
  generator: "autospec"
  generator_version: "autospec dev"
  created: "2025-12-16T06:00:04Z"
  artifact_type: "plan"
