tasks:
    branch: "013-uninstall-command"
    created: "2025-12-15"
    spec_path: "specs/013-uninstall-command/spec.yaml"
    plan_path: "specs/013-uninstall-command/plan.yaml"
summary:
    total_tasks: 14
    total_phases: 5
    parallel_opportunities: 4
    estimated_complexity: "medium"
phases:
    - number: 1
      title: "Setup"
      purpose: "Create new package structure for uninstall functionality"
      tasks:
        - id: "T001"
          title: "Create internal/uninstall/ package directory"
          status: "Completed"
          type: "setup"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/"
          dependencies: []
          acceptance_criteria:
            - "Directory internal/uninstall/ exists"
            - "Package is importable by internal/cli"
    - number: 2
      title: "Foundational"
      purpose: "Core uninstall logic and types that all user stories depend on"
      tasks:
        - id: "T002"
          title: "Implement UninstallTarget and UninstallResult types in internal/uninstall/uninstall.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/uninstall.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "UninstallTarget struct with Path, Type, Description, Exists, RequiresSudo fields"
            - "TargetType constants for binary, config_dir, state_dir"
            - "UninstallResult struct with Target, Success, Error fields"
        - id: "T003"
          title: "Implement DetectBinaryLocation() function using os.Executable()"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/uninstall.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Function returns absolute path to current executable"
            - "Resolves symlinks to get actual binary location"
            - "Returns error if unable to detect"
        - id: "T004"
          title: "Implement GetUninstallTargets() function returning all removal targets"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/uninstall.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "Returns slice of UninstallTarget for binary, ~/.config/autospec/, ~/.autospec/"
            - "Each target has Exists field populated correctly"
            - "Binary target has RequiresSudo populated based on location permissions"
        - id: "T005"
          title: "Implement RequiresSudo() helper function for permission checking"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/uninstall.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Returns true if file is in system directory (e.g., /usr/local/bin)"
            - "Returns false if file is in user-writable location"
            - "Checks actual write permission on parent directory"
        - id: "T006"
          title: "Implement RemoveTargets() function with error handling"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/uninstall.go"
          dependencies: ["T004", "T005"]
          acceptance_criteria:
            - "Removes each target and returns slice of UninstallResult"
            - "Handles missing files gracefully (not an error)"
            - "Continues removing other targets if one fails"
            - "Uses os.RemoveAll for directories, os.Remove for binary"
        - id: "T007"
          title: "Add unit tests for internal/uninstall package"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "internal/uninstall/uninstall_test.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "Test DetectBinaryLocation returns valid path"
            - "Test GetUninstallTargets returns expected targets"
            - "Test RequiresSudo returns correct values for different paths"
            - "Test RemoveTargets handles missing files gracefully"
            - "Table-driven tests following existing patterns"
    - number: 3
      title: "User Story 1 & 4 - Full uninstallation with clear feedback"
      purpose: "Implement interactive uninstall with confirmation and progress output"
      story_reference: "US-001, US-004"
      independent_test: "Run 'autospec uninstall' and verify y/N prompt, removal, and output"
      tasks:
        - id: "T008"
          title: "Create internal/cli/uninstall.go with Cobra command"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/uninstall.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "Command registered as 'autospec uninstall'"
            - "Short and long descriptions match feature intent"
            - "Command calls internal/uninstall package functions"
        - id: "T009"
          title: "Implement confirmation prompt with y/N default in uninstall command"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/uninstall.go"
          dependencies: ["T008"]
          acceptance_criteria:
            - "Displays 'Uninstall autospec? [y/N]:' prompt"
            - "Pressing Enter (empty input) cancels uninstall"
            - "Only 'y' or 'Y' confirms uninstall"
            - "Cancelled uninstall exits with code 0 and message"
            - "Shows hint about 'autospec clean' for project cleanup"
        - id: "T010"
          title: "Implement progress output showing each removal step"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-004"
          file_path: "internal/cli/uninstall.go"
          dependencies: ["T009"]
          acceptance_criteria:
            - "Each removal target shows status (removing/removed/skipped/failed)"
            - "Success shows checkmark, failure shows X with error message"
            - "Final summary shows overall result"
            - "Handles sudo-required binary with clear message"
    - number: 4
      title: "User Story 2 & 3 - Non-interactive and dry-run modes"
      purpose: "Add --yes and --dry-run flags for scripting and preview"
      story_reference: "US-002, US-003"
      independent_test: "Run 'autospec uninstall --dry-run' and 'autospec uninstall --yes'"
      tasks:
        - id: "T011"
          title: "Add --yes/-y flag to skip confirmation prompt"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "internal/cli/uninstall.go"
          dependencies: ["T010"]
          acceptance_criteria:
            - "Flag --yes and short -y both work"
            - "When set, skips confirmation prompt entirely"
            - "Proceeds directly to removal"
        - id: "T012"
          title: "Add --dry-run flag to preview removals without executing"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-003"
          file_path: "internal/cli/uninstall.go"
          dependencies: ["T010"]
          acceptance_criteria:
            - "Flag --dry-run shows list of targets without removing"
            - "Output clearly indicates 'would remove' vs actual removal"
            - "Shows which items exist and which don't"
            - "No files are modified when --dry-run is set"
        - id: "T013"
          title: "Add CLI tests for uninstall command"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-002"
          file_path: "internal/cli/uninstall_test.go"
          dependencies: ["T011", "T012"]
          acceptance_criteria:
            - "Test command is registered and has correct flags"
            - "Test --dry-run doesn't remove files"
            - "Test --yes skips confirmation"
            - "Test default cancellation behavior"
    - number: 5
      title: "Polish & Documentation"
      purpose: "Update documentation and run final validation"
      tasks:
        - id: "T014"
          title: "Update CLAUDE.md with uninstall command documentation"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: null
          file_path: "CLAUDE.md"
          dependencies: ["T013"]
          acceptance_criteria:
            - "Add 'autospec uninstall' to CLI usage section"
            - "Document --dry-run and --yes flags"
            - "Add usage examples"
            - "Run 'make fmt' and 'make test' to verify"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: ["US-002", "US-003", "US-004"]
        - story_id: "US-004"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-003"
          depends_on: ["US-001"]
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3]
        - phase: 3
          blocks: [4]
        - phase: 4
          blocks: [5]
parallel_execution:
    - phase: 2
      parallel_groups:
        - tasks: ["T003", "T005"]
          rationale: "DetectBinaryLocation and RequiresSudo are independent helper functions"
    - phase: 4
      parallel_groups:
        - tasks: ["T011", "T012"]
          rationale: "--yes and --dry-run flags are independent features"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3]
        description: "Setup + Foundational + Basic uninstall with confirmation"
        validation: "Run 'autospec uninstall' and verify it prompts and removes files"
    incremental_delivery:
        - milestone: "Foundation Ready"
          phases: [1, 2]
          deliverable: "Core uninstall logic can detect and remove targets"
        - milestone: "MVP Complete"
          phases: [1, 2, 3]
          deliverable: "Interactive uninstall with confirmation works"
        - milestone: "Full Feature"
          phases: [1, 2, 3, 4, 5]
          deliverable: "Complete uninstall with --yes, --dry-run, and documentation"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "dev"
    created: "2025-12-15T23:15:00Z"
    artifact_type: "tasks"
