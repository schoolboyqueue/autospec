tasks:
    branch: "057-fix-description-propagation"
    created: "2025-12-18"
    spec_path: "specs/057-fix-description-propagation/spec.yaml"
    plan_path: "specs/057-fix-description-propagation/plan.yaml"
summary:
    total_tasks: 10
    total_phases: 4
    parallel_opportunities: 3
    estimated_complexity: "low"
phases:
    - number: 1
      title: "Setup"
      purpose: "Verify prerequisites and understand current implementation"
      tasks:
        - id: "T001"
          title: "Review current stageExecutionContext struct and executeStages function in internal/cli/run.go"
          status: "Completed"
          type: "setup"
          parallel: false
          story_id: null
          file_path: "internal/cli/run.go"
          dependencies: []
          acceptance_criteria:
            - "Understand current struct fields and how featureDescription flows to each execute method"
            - "Identify exactly where -a flag triggers stageConfig.SetAll()"
            - "Document current behavior to compare against after fix"
    - number: 2
      title: "User Story 1 - Full workflow with feature description"
      purpose: "Fix the core bug: -a flag description only to specify stage"
      story_reference: "US-001"
      independent_test: "Run `autospec run -a 'test desc'` and verify plan/tasks/implement receive empty prompts via debug logging"
      tasks:
        - id: "T002"
          title: "Add isFullWorkflow field to stageExecutionContext struct in internal/cli/run.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "Add `isFullWorkflow bool` field to stageExecutionContext struct"
            - "Add comment explaining the field purpose"
            - "Field is initialized to false by default"
        - id: "T003"
          title: "Set isFullWorkflow=true when -a flag triggers SetAll() in internal/cli/run.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Identify the code path where -a flag calls stageConfig.SetAll()"
            - "Set context.isFullWorkflow = true immediately after or alongside SetAll() call"
            - "Ensure this does not affect explicit stage flag combinations (-sp, -ti, etc.)"
        - id: "T004"
          title: "Modify executePlan to pass empty string when isFullWorkflow=true in internal/cli/run.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "Add conditional check: if ctx.isFullWorkflow { prompt = \"\" } else { prompt = ctx.featureDescription }"
            - "Pass the conditional prompt to orchestrator.ExecutePlan()"
            - "Add comment explaining the semantic difference"
        - id: "T005"
          title: "Modify executeTasks to pass empty string when isFullWorkflow=true in internal/cli/run.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "Add conditional check: if ctx.isFullWorkflow { prompt = \"\" } else { prompt = ctx.featureDescription }"
            - "Pass the conditional prompt to orchestrator.ExecuteTasks()"
            - "Add comment explaining the semantic difference"
        - id: "T006"
          title: "Modify executeImplement to pass empty string when isFullWorkflow=true in internal/cli/run.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "Add conditional check: if ctx.isFullWorkflow { prompt = \"\" } else { prompt = ctx.featureDescription }"
            - "Pass the conditional prompt to orchestrator.ExecuteImplement()"
            - "Add comment explaining the semantic difference"
    - number: 3
      title: "User Stories 2-5 - Verification Tests"
      purpose: "Test all description propagation scenarios including individual flags, multi-flags, and parity"
      story_reference: "US-002, US-003, US-004, US-005"
      independent_test: "Run make test and verify all new run_test.go tests pass"
      tasks:
        - id: "T007"
          title: "Add tests for -a flag description propagation in internal/cli/run_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/run_test.go"
          dependencies: ["T004", "T005", "T006"]
          acceptance_criteria:
            - "Test -a flag: verify specify receives description, plan/tasks/implement receive empty"
            - "Use map-based table-driven test pattern with t.Parallel()"
            - "Test with non-empty description argument"
        - id: "T008"
          title: "Add tests for individual stage flags (-p, -t, -i) and multi-stage flags (-ti, -pt) in internal/cli/run_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-002"
          file_path: "internal/cli/run_test.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "Test -p flag: verify plan receives description"
            - "Test -t flag: verify tasks receives description"
            - "Test -i flag: verify implement receives description"
            - "Test -ti flags: verify both tasks and implement receive description"
            - "Test -pt flags: verify both plan and tasks receive description"
            - "Use map-based table-driven test pattern with t.Parallel()"
    - number: 4
      title: "Polish & Quality Gates"
      purpose: "Run quality gates and finalize implementation"
      tasks:
        - id: "T009"
          title: "Run make fmt, make lint, make build to verify code quality"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/cli/run.go"
          dependencies: ["T008"]
          acceptance_criteria:
            - "make fmt produces no changes"
            - "make lint passes with no errors"
            - "make build succeeds"
        - id: "T010"
          title: "Run make test to verify all tests pass including new description propagation tests"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "internal/cli/run_test.go"
          dependencies: ["T009"]
          acceptance_criteria:
            - "make test passes with all tests green"
            - "No regressions in existing functionality"
            - "New description propagation tests all pass"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: ["US-002", "US-003", "US-004", "US-005"]
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-003"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-004"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-005"
          depends_on: ["US-001"]
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3]
        - phase: 3
          blocks: [4]
parallel_execution:
    - phase: 2
      parallel_groups:
        - tasks: ["T004", "T005", "T006"]
          rationale: "Each modifies different execute methods in the same file but no dependencies between them"
implementation_strategy:
    mvp_scope:
        phases: [1, 2]
        description: "Setup + Core fix implementation (isFullWorkflow field and conditional logic)"
        validation: "Manual test: run `autospec run -a 'test'` and verify behavior matches `autospec all 'test'`"
    incremental_delivery:
        - milestone: "Core Fix Ready"
          phases: [1, 2]
          deliverable: "isFullWorkflow tracking implemented, description propagation fixed for -a flag"
        - milestone: "Fully Tested"
          phases: [1, 2, 3]
          deliverable: "All test cases for -a, individual flags, and multi-flags pass"
        - milestone: "Production Ready"
          phases: [1, 2, 3, 4]
          deliverable: "All quality gates pass, ready for merge"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "autospec 0.4.0"
    created: "2025-12-18T23:40:55Z"
    artifact_type: "tasks"
